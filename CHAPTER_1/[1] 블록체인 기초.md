# 📝 1. 블록체인 기초 📝

### 🔎 목차

1. [비트코인에서 블록체인으로](#1-비트코인에서-블록체인으로)
    1. [용어정의](#11-용어-정의)

2. [블록체인이란 무엇인가?](#2-블록체인이란-무엇인가)

3. [블록체인 프로그래밍](#3-블록체인-프로그래밍)

    1. [블록체인 인프라](#31-블록체인-인프라)

    2. [분산 장부 기술](#32-분산-장부-기술)

    3. [탈중개 프로토콜](#33-탈중개-프로토콜)

    4. [신뢰 확립자](#34-신뢰-확립자)

4. [되돌아보기](#4-되돌아보기)

5. [요약](#-요약)

<br>

## 1 비트코인에서 블록체인으로

- 블록체인은 중개자 없이 전 세계 누구에게나 디지털 통화를 P2P로 전송할 수 있다.

- 트랜잭션에 대해서도 P2P 기능을 적용할 수 있다는 사실이 알려지면서 더욱 고조 되었다.

- 트랜잭션 레코드는 블록체인 프로토콜과 애플리케이션에 기반한 다른 상세 정보도 아우른다.

- 이더리움은 검증, 인증, 그리고 저장 능력이 다른 디지털 자산과 연관된 트랜잭션과 시스템으로 확장할 수 있다는 점에서 혁신을 이루었다.

### 1.1 용어 정의

1. 비트코인 :

2. P2P(peer to peer) :

3. 트랜잭션(transaction) : 어떤 오퍼레이션을 실행할지, 그 오퍼레이션을 실행하기 위한 데이터 파라미터, 그리고 메시지 송신인, 수신인, 트랜잭션 수수료, 저장할 때의 타임스탬프 등을 포함하는 P2P 메시지로서 블록체인에 기록된다.

4. 블록의 체인

5. 노드(node) : 탈중앙화 시스템의 참여자를 위한 블록체인 소프트웨어와 그것이 설치된 장비 또는 하드웨어를 집합적으로 부르는 말이다. 하나의 노드는 탈중앙화 네트워크에서 피어 참여자들의 아이덴티티를 나타내는 다수의 어카운트를 지원할 수 있다.

6. 어카운트(account) : 트랜잭션을 수행하는 주체의 고유한 아이덴티티를 나타낸다. 트랜잭션을 시작하기 위해서는 어카운트가 필요하다.

7. 프로토콜

8. Dapp : 신뢰 중개를 구현한 블록체인 함수들을 구동시키는 애플리케이션 로직을 가진 웹 또는 엔터프라이즈 애플리케이션이다.

9. 스마트 컨트랙트(smart contract) : Dapp의 로직을 표현해 주는 변조 불가능하고 실행 가능한 코드(immutable executable code)다. 스마트 컨트랙트에서 정의한 데이터 변수와 함수들은 블록체인에서 확인, 검증, 저장을 가능케 하는 애플리케이션(Dapp)의 규칙을 강제하기 위한 상태와 오퍼레이션을 집합적으로 표현한다.

10. 제네시스 블록(genesis block) : 첫 번재 블록이다.
<br>

## 2 블록체인이란 무엇인가?

- 블록체인(blockchain)은 peer 참여자들 간의 트랜잭션으로 이루어진 탈중앙화 시스템에 신뢰를 구축해 주는 기술이다.

- 블록체인 인프라는 많은 수의 P2P 참여자들 간에 신뢰 중개를 만드는 소프트웨어를 포함하고 있다.

- 블록체인 프로그래밍은 기존 시스템을 전부 대체한다기보다는 확인과 검증을 하는 신뢰 중개 코드를 바탕으로 기존 시스템을 개선하는 것이다.

- 비트코인과 이더리움의 차이로는 비트코인은 오직 지갑 애플리케이션만 가지고 있지만, 이더리움은 스마트 컨트랙트라는 프로그래밍이 가능한 코드 기능을 제공한다는 것이다.

- 세 가지 레벨에서의 프로그래밍
    - <b>프로토콜 레벨 프로그래밍</b> (protocol-level programming) : 블록체인 자체의 배포와 오퍼레이션을 위해 필요한 소프트웨어와 관련된 프로그래밍이다. <u>오퍼레이팅 시스템이나 네트워킹 소프트웨어와 유사하다.</u>
    - <b>스마트 컨트랙트 레벨 프로그래밍</b> (smart contract-level programming) : 확인과 검증을 위한 규칙을 설계하고 프로그래밍하며, 블록체인에 기록할 데이터와 메시지를 규정하는 <u>스마트 컨트랙트(또는 룰 엔진) 프로그래밍에 대한 것이다.</u>
    - <b>애플리케이션 레벨 프로그래밍</b> (application-level programming) : 블록체인 프로토콜 외부에 있는 <u>웹(또는 엔터프라이즈, 모바일) 애플리케이션 프레임워크와 유저 인터페이스 설계 콘셉트들을 사용해 프로그래밍하는 것이다.</u>

## 3 블록체인 프로그래밍
블록체인 프로그래밍은 또 하나의 패러다임 전환이다. 블록체인 프로그래밍을 차별화하는 네 가지의 근본적인 개념으로 블록체인 인프라, 분산 장부 기술, 탈중개 프로토콜, 신뢰 확립자가 있다.

### 3.1 블록체인 인프라
블록체인 인프라(decentralized infrastructure)는 블록체인 프로토콜, 스마트 컨트랙트, 애플리케이션을 지원하는 특정한 컴퓨팅 하드웨어와 소프트웨어 스택, 이러한 인프라의 주 구성요소는 컴퓨팅 노드와 이들 노드를 연결하는 네트워크이다.
또한, 도시를 연결하는 철로나 도로처럼 내재적으로 <b>탈중앙화</b>가 이루어져 있다. 

탈중앙화 시스템은 분산 시스템의 일종으로 참여자들에 대해 다음과 같은 일이 일어난다.

- P2P로 소통한다.

- 디지털이든 아니든 자신의 자신을 통제한다.

- 참여하거나 떠날 수 있다.

- 신뢰 경계를 넘어서는 행위를 한다.

- 결정은 분산된 참여자들이 내린다.

- 자동화된 소프트웨어가 상호 간 중개(intermediation)를 담당한다.

블록체인 노드와 애플리케이션 스택 레벨

(Lv. 1) 컴퓨터 시스템 하드웨어 / 네트워크와 오퍼레이팅 시스템 : 이 두가지 레이어는 웹 서버가 가지고 있는 것과 동일하다.

(Lv. 2) 블록체인 프로토콜 구현 : 트랜잭션과 블록 합의 같은 블록체인의 기능을 구현한다.

(Lv. 3) 가상머신 샌드박스상의 애플리케이션 로직 : 애플리케이션 로직을 실행하는 환경을 구현하는 레벨이다. 데이터 액세스 컨트롤, 확인, 검증 그리고 저장을 위한 함수 코딩과 같은 문제들을 해결한다. 

(Lv. 4) 탈중앙화 애플리케이션 : 인터페이스 단계로 HTML, 자바스크립트, 프레임워크와 같은 웹 프로그래밍이 이루어진다. Dapp과 유저 인터페이스(UI) 레이어를 구성한다.

블록체인 애플리케이션은 일반적으로 많은 수의 참여자를 노드 네트워크를 통해 연결한다. 이 네트워크에서는 

- 사용자가 기동한 트랜잭션

- 트랜잭션들로 이루어진 블록

을 브로드캐스팅할 수 있다. 이러한 트랜잭션과 블록은 네트워크의 페이로드(payload)를 구성하며, 최종적으로 <u>확인과 검증을 거쳐 분산된 장부에 기록된다.</u>
네트워크 식별자를 가지고 블록체인 노드 네트워크를 식별하므로 스마트 컨트랙트를 네트워크에 배포할 때 <u>네트워크의 식별자를 사용해서 어느 네트워크를 사용하는 것인지를 표시해 주어야만 한다.</u>
주어진 <u>단일한 네트워크를 이용하는 참여자들은 트랜잭션 내용을 저장하기 위해 단일한 분산 장부를 공유한다.</u>

### 3.2 분산 장부 기술

- 분산되어있다.

- 변조가 불가능하다.

분산 장부 기술(distributed ledger technology, DLT)는 인프라 위에 장부가 있는데, <u>모든 참여자의 장부에 트랜잭션과 데이터를 동시에 기록한다.</u> 장부는 모든 참여자가 <u>동일한 사실을 저장하고 있기 때문에 분산되어 있다고 할 수 있다.</u> 각 블록은 이전 블록의 서명과 연결되어 변조 방지가 되므로 <b>변조 불가능(immutable)하다.</b>

네트워크를 통해 트랜잭션을 브로드캐스팅한 후, 변조 불가능한 분산 장부에 기록한다. 이러한 규칙은 블록체인이 통제하는 자율적인 시스템을 위해서 필요하다.

<i>트랜잭션을 기동하는 두 개의 함수를 위한 예제 코드</i>

```
/*Tx1 : */ web3.eth.sendTransaction(fromAccount, toAccount, value);
/*Tx2 : */ transferOwnership(newOwner);

function transferOwnership onlyByOwner (account newOwner) ...
```

위 코드는 순서대로 한 어카운트에서 다른 어카운트로 암호 화폐를 전송한다. 그리고 비암호 화폐트랜잭션으로 이 Tx의 전송자는 현재 소유자라는 것을 가정한다. 마지막으로 OnlyByOwner라는 규칙은 전송자가 소유자인지를 검사한다. 만일 그렇지 않은 Tx는 취소한다.

<b>블록체인에 저장하는 방법</b>

트랜잭션의 집합이 블록을 만들고, 블록의 집합이 블록체인을 만든다.

1. 수집한 네트워크의 트랜잭션들은 검증 단계를 거쳐 풀로 모인다. 노드는 블록을 만들기 위해 풀에서 트랜잭션들을 골라서 세트를 만든다. 일반적으로 트랜잭션에 책졍된 수수료가 비싼 트랜잭션부터 선택받는다.

2. 합의를 한다.

3. 해시를 새롭게 추가될 블록에 더해서 체인 링크(chain link)를 만든다.

즉, 블록체인은 추가만 허용하는(append-only) 분산된 변조 불가 장부이다. 이 때, 제네시스 블록에서 블록체인을 생성한다. 제네시스 노드로부터 시작해서 모두 동일한 블록체인 복사본을 가진다. <b>변조 불가능성을 보장하기 위해 블록 n을 나타내는 서명값이 블록 n+1에 저장되어 있다.</b>

### 3.3 탈중개 프로토콜
탈중개 프로토콜(disintermediation protocol)은 탈중앙화 시스템의 참여자들은 상호간에 연결하고 통신하고 거래하기 위해 <u>동일한 블록체인 프로토콜을 사용한다.</u> 프로토콜은 모두가 따라야 할 <u>규칙의 집합니다.</U>

블록체인 프로토콜은 다음과 같은 것을 규정한다.

- 블록체인의 구조(트랝개션, 블록, 그리고 블록의 체인)

- 암호화, 해싱, 그리고 상태 관리를 위한 기반 알고리즘과 표준

- 불일치하는 장부를 초래할 수 있는 예외들을 처리하는 테크닉

- 일관성, 정확성, 변조 불가능성을 유지하기 위한 블록체인의 코드와 규칙들의 실행 환경

블록체인의 구조와 오퍼레이션은 임의의 것이 아니라 프로토콜에 따른다. 프로토콜 구현은 블록체인 애플리케이션을 만들 베이스 레이어를 확립하는 것이다. 

여기서 비트코인은 암호 화폐 전송을 윟나 것이고 트랜젹선을 기동하기 위한 지갑 애플리케이션만을 가지고 있다.
이더리움은 스마트 컨트랙트와 이것을 실행할 수 있는 이더리움 VM(EVM)이라 불리는 VM 샌드박스를 지원한다. 이로 인해 스마트 컨트랙트는 탈중앙화 애플리케이션의 작동을 실현해 준다.


### 3.4 신뢰 확립자
탈중앙화 참여자 시스템은 중앙화된 정부 기관이나 은행과 같은 중개자들이 없다. 그러므로 중개자 없이도 거버넌스(governance), 검사, 준수(compliance) 등에 대한 규칙을 구현하여 거의 자동으로 처리하는 인프로가 필요하다. 블록체인 소프트웨어는 신뢰 확집자(trust enabler)의 역할을 맡는다.

따라서 다른 메커니즘, 즉 소프트웨어 메커니즘이 필요하다. 블록체인은 인터넷에 신뢰 레이어를 만들어 신뢰 중개를 함으로써 이러한 필요를 충족시킨다.
소프트웨어 기반 확인, 검증, 변조 불가능한 저장을 통해 이루어진다. 

탈중앙화(decentralized) 인프라, 분산(distributed) 장부 기술, 탈중개(disintermediation) 프로토콜, 이 세가지의 3D가 집합적으로 시스템에 신뢰를 구축한다.

<br>

## 4 되돌아보기

- 블록체인 작동하는 법 : 블록체인을 사용하는 이유, 구조적 컴포넌트, 세부적인 작동 내용, 블록체인이 기능하게 할 시스템의 신뢰와 정합성 등

- 블록체인 3D : 탈중앙화, 탈중개, 분산을 지원하는 수단

<br>

## 📎 요약

- 컴퓨팅 시스템은 분산되고 중앙화된 시스템으로부터 탈중화 시스템으로 변화는 추세이다.

- 탈중앙화 시스템에서 참여자들은 P2P 트랜잭션을 하며 일상의 신뢰 경계를 넘어서서 활동하게 된다.

- 블록체인은 신뢰 레이어, 인프로, 블록체인의 오퍼레이션을 관할하는 프로토콜을 제공함으로써 탈중앙화 오퍼레이션을 기능하게 한다.

- 탈중앙화, 탈중개, 애플리케이션의 실행과 관련된 정보의 저장을 위한 변조 불가능한 분산 장부를 가능하게 한다.

- 참여자를 관할하는 규칙을 정한다.

- 이더리움 블록체인 애플리케이션 스택은 스마트 컨트랙트와 그것의 실행 환경을 위한 연산 프레임워크를 제공한다.

- 사물 인터넷에서 웹에 이르기까지 모든 레벨에서 블록체인을 배우는 것은 필수이다.

<br>
